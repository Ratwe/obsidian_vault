DOS - 16 разрядная **однозадачная** ОС на базе процессоров Intel8086. С точки зрения техники это очень устаревшая ОС. 

В IBM360 уже была реализована многозадачность. В начале 70х годов был написан UNIX. Он писался как система разделения времени с поддержкой виртуальной памяти. В это же время появились первые микропроцессоры и появилась возможность создания персонального компьютера, способного выполнять разумный объём действий и, главное, его можно было иметь дома, а не выходить на мейнфрейм по типу MULTICS. 

ПК на базе Intel8086 были способны покрывать офисные нужды, хоть и не были мощными. Теперь печатали документы не на машинках, а на компьютерах. 

Microsoft продавал ПК с уже установленной ОС DOS. 

DOS - однозадачная ОС, но могут возникать аппаратные прерывания. В DOS'е никакой многозадачности нет. Int8h дизассемблируем в режиме эмуляции DOS. А режим этот многозадачный. 

Идея обратной совместимости: мощнейшие суперкомпьютеры могут работать как старые машины на базе Intel8086. Или 64-разрядный ПК может выполнять 32-разрядные программы. Это не просто идея, а аппаратная поддержка -> дополнительные затраты. При этом в реальном режиме схема аппаратного обеспечения возможности работая со внешними устройствами, с прерываниями от внешних устройств практически соответствует тому, что выполняется в современных машинах.

[[Режимы работы компьютера]]:
1. Реальный режим (16-разрядный)
2. Защищённый режим (32-разрядный)
	 - Специальный виртуальный режим V86. В каждой виртуальной программе можно выполнять ОДНУ программу реального режима.  
	Многозадачный. Многопроцессный. С поддержкой виртуальной памяти. 
	
3. Режим long (64-разрядный)
	- Режим обратной совместимости compability. Можем обратиться к младшей части регистра. Она аппаратно доступна.

Трёхшинная концептуальная схема

Главная задача ОС - выделять процессу ресурсы: память, объём ОЗУ, коды ядра *и ещё что-то*...

В компьютере передаются сигналы трёх типов:
1. Данные: данные и команды
2. Адреса
3. Сигналы управления 

В концептуальной съеме содержатся: шина данных, адреса, управления. *По каждому проводу передаётся один разряд.* Для 64-битной системы нужно 64 медных провода.

Процессор собственной памяти не имеет. Процессор постоянно обменивается с *оперативно запоминающим устройством.* 

На ША выставляет адрес. На ШУ команду чтение/запись. Если запись, то на ШД кладёт данные, а оттуда попадают на контроллер данных. 

Минимально адресуема единица памяти в "наших" компьютерах - байт. 
В компьютерах всё адресуется. Все обращения выполняются по адресу. Фон-Нейман отразил тот факт, что программа должна храниться в памяти последовательно (в последовательных адресах), поскольку не нужно хранить адрес следующей команды.

Контроллер управляет внешними устройствами. С их помощью в шинной архитектуре реализуется идея распараллеливания функций. Процессор только запускает процесс ввода/вывода, посылая сигнал контроллеру. Потом он отключается и может выполнять другие функции. Так он не простаивает то время, пока ждёт завершение ввода/вывода.

Такая архитектура потребовала аппаратных прерываний. В системе существует система прерываний:
1. Системные вызовы (программные прерывания)
2. Исключения
3. Аппаратные прерывания (interrupt)

Для оповещения компьютера о завершении ввода/вывода в Inte80/86 был контроллер прерываний PIC из двух микросхем контроллеров. Линии IRQ существуют в современных системах тоже, несмотря на MSI (message signal interrupt). 

![[Pasted image 20230912183209.png]]

На IRQ0 приходят тики - прерывания системного таймера. В DOS происходит 18.2 раза в секунду. Тик - единственное периодическое прерывание.
IRQ1 - прерывание от клавиатуры PS/2.
IRQ12 - прерывание от мыши PS/2.

PIC - peripheral interrupt controller
Все прерывания могут быть замаскИруемы, т.е. запрещены. Есть прерывания немаскИруемые.

-> выборка - дешифрация - выполнение -> проверка наличия прерывания на своей ножке (контакте) -> *и по новой*
Если прерывание найдено, то посылается INTa - answer. Получив этот сигнал...

*что-то про смещения, вектор прерывания, адреса.. попросил Иру сфоткать доску*

Внешние устройства адресуются. Порт это адрес. 
На внешние устройства могут поступать сигналы управления, они могут использоваться для ввода/вывода - передачи данных.

Контроллер получается маску прерывания (стрелочки от шин в контроллер).

# Префиксная команда loc
Ставится перед командой, которая должна выполнять как неделимая или атомарная - прервать её выполнение нельзя. Реализовано блокировкой **локальной шины** памяти. Шина данных - концепция, идея, её нет в наших компьютерах. Во время выполнения никакая другая команда к памяти обратиться не может. 

Команда доступа к памяти - mov. Ещё есть in/out, *они для внешних устройств.*

*Что-то про разницу аналоговых и цифровых сигналов.* Что мы не можем получать бесконечно малые и бесконечно большие значения, т.к. разрядность ограничена.

Оперативная память энергозависима.
Вторичная - нет.

### Zero-links
[[00 ОС]]