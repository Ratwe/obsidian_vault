# Требования Рязановой Н.Ю.
Какой процесс (id) какую букву написал, кто какую взял.
Массив не объявлять, все действия выполнять через указатели.
Не меньше трёх производителей и трёх потребителей. 
Создаём форком.
Это - асинхронные процессы, выполняющиеся с разной скоростью.
Необходимо использовать абсолютно случайные задержки с изменением начальной установки задержки.
В буфер процессы пишут буквы латинского алфавита. 
Размер буфера ставят 1024.
Если объект взят из буфера - ячейка перестаёт существовать.

Соответственно, в буфере, начиная с начального адреса, положить текущий адрес производителя. Затем текущий адрес потребителя. Затем - текущую букву. Следующий производитель не знает, какая буква положена. Он же её не читает. Поэтому надо сохранять. 

Начальное значение: "а".
Выход по сигналу SIGINT. 
Потомки наследуют обработчики сигналов.
В struct_task_struct есть signal handler \*signal.
Потомки наследуют обработчики сигналов.

Вопросы и ответы:
охарактеризовать задачу производства-потребления
в чём её особенность

8 рабочих 1 управляющий процесс
сущ два типа процессов - производители и потребители
читают/записывают в сегмент разделяемой памяти

задача, в которой существует два типа процессов:
продюсеры производят единицу данных и могут только помещать данные в буфер
а консьюмеры могут только брать данные из буфера

consumer блокируется на семафоре буфер полон, когда нет заполненных ячеек и на бинарном семафоре 

Бинарный семафор обеспечивает монопольный доступ к конкретной ячейке памяти (критической секции)

почему четыре раза выполняются операции над семафором:
по алгоритму Дейкстры каждый раз неделимая операция выполняется над двумя семафорами наборов(?)
поэтому для выполнения этих действий (каждый раз два действия)

почему четыре массива структур?
каждая операция должна быть атомарной, соответственно каждый семафор отвечает за свою операцию.

Что потомки наследуют? Перечислить.
## Сдача лабы

![[Recording 20231121160154.webm]]

![[Recording 20231121163110.webm]]

![[Recording 20231121165406.webm]]

![[Recording 20231121170254.webm]]

-----
Вторая программа - читатели-писатели.
Если посмотреть запись монитора, то там исп. функция тёрн() - очередь ждущих писателей и читателей. Заменяем счётчиком ждущих писателей, активных читателей, ждущих читателей. Три считающихся семафоров и один бинарный семафор активного писателя, который реализует работу активного писателя. Т.е. с помощью бинарного семафора реализуется взаимоисключение писателей. Но в то же время, если есть активный писатель - ни читать, ни писать нельзя.

start_write, stop_wrtie, start_read, stop_read.

Читатель может начать читать в start_read, если нет активного писателя и ждущих писателей. У некоторых не получается. Решение:
создать теневой семафор, тогда пять (????????????). 

Читатели-писатели переменные типа integer. Писатели только инкрементируют значение переменной, читатели - декрементируют.

Кто (id) значение взял, кто отдал.
Начальное значение: 0.

## Сдача лабы

![[Recording 20231128145150.webm]]
Есть два типа процессоров: писатели могут только изменять данные в переменной в режиме монопольного доступа. Могут читать параллельно из разделяемой переменной. Писатели могут только изменять разделяемую переменную в режиме монопольного доступа.

Каким образом к разделяемой переменной реализуется монопольный доступ - при помощи бинарного семафора bin_sem.

Когда читатель сможет читать? 

Как могут работать читатели/писатели? Параллельно/в режиме монопольного доступа.

Использует для захвата критической секции. Т.е. для обеспечения монопольного доступа.

А зачем ещё дополнительный семафор ACTIVE_WRITER?
![[Recording 20231128162236.webm]]

Имеет ли место такая реализация, где мы 
![[Recording 20231128164630.webm]]
